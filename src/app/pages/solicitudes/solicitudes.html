<div class="flex flex-col">
  <div class="flex flex-1 bg-white rounded-lg mb-4 p-2 text-gray-500 items-center gap-1 justify-end">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M11 6C13.7614 6 16 8.23858 16 11M16.6588 16.6549L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path> </g></svg>
    <input placeholder="Buscar..." (input)="onSearchEvent($event.target.value)" class="border border-gray-200 rounded-lg outline-none px-2 py-1" type="text">
  </div>

  <div class="flex flex-1 rounded-t-lg border border-gray-200 overflow-hidden">
    <table id="data" class="w-full border-collapse">
      <thead class="bg-gray-150">
        <tr>
          @for (header of headers; track $index) {
          <th
            class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
          >
            {{ header }}
          </th>
          }
        </tr>
      </thead>
      <tbody class="bg-white divide-y divide-gray-200">
        @for (solicitud of paginatedSolicitudes; track $index) {
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium">
            {{ solicitud.folio }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ solicitud.usuario }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">{{ solicitud.fecha }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
            <span
              class="px-2 py-1 inline-flex text-xs leading-5 rounded-full border"
              [ngClass]="{
                'text-red-500 bg-red-100 border-red-500': solicitud.estado === 'Rechazada',
                'text-green-500 bg-green-100 border-green-500': solicitud.estado === 'Aprobada',
                'text-yellow-500 bg-yellow-100 border-yellow-500': solicitud.estado === 'Pendiente'
              }"
              >● {{ solicitud.estado }}</span
            >
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm">
            <button
              class="text-blue-500 font-medium bg-blue-50 px-3 py-1 rounded-lg hover:bg-blue-100 transition"
            >
              Ver detalles
            </button>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Paginación !-->
  <div
    class="flex items-center justify-between px-6 py-3 bg-gray-50 border-l border-r border-b border-gray-200 rounded-b-lg"
  >
    <div class="text-sm text-gray-500">
      Mostrando {{ (currentPage - 1) * itemsPerPage + 1 }} a
      {{ currentPage * itemsPerPage < totalItems ? currentPage * itemsPerPage : totalItems }} de
      {{ totalItems }} resultados
    </div>

    <div class="flex space-x-2">
      <button
        (click)="previousPage()"
        [disabled]="currentPage === 1"
        class="p-1 text-blue-500 bg-blue-100 rounded-full disabled:opacity-50 cursor-pointer"
      >
        <svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            id="Vector"
            d="M17 12H7M7 12L11 16M7 12L11 8"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </svg>
      </button>

      @for (page of getPageNumbers(); track page) {
      <button
        (click)="goToPage(page)"
        class="px-3 py-1 text-sm rounded cursor-pointer"
        [class]="page === currentPage ? 'bg-blue-400 text-white' : 'bg-white hover:bg-blue-100'"
      >
        {{ page }}
      </button>
      }

      <button
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
        class="p-1 text-sm text-blue-500 bg-blue-100 rounded-full disabled:opacity-50 cursor-pointer"
      >
        <svg
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          transform="matrix(-1, 0, 0, 1, 0, 0)"
        >
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
          <g id="SVGRepo_iconCarrier">
            <g id="Arrow / Arrow_Left_SM">
              <path
                id="Vector"
                d="M17 12H7M7 12L11 16M7 12L11 8"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></path>
            </g>
          </g>
        </svg>
      </button>
    </div>
  </div>
</div>
